#.NET 架构

## C#和.NET之间的关系

首先我们来确定下C#和.NET的关系，我们知道C#语言会编译成.NET的中间代码IL，C#的架构和属性都是基于.NET的，所以我们在提C#的时候就不得不提.NET

1. C#的架构和方法体现或者反应了.NET的架构和方法
2. 在很多情况下，C#的特定功能其实是依赖于.NET的基础功能

因为有上述的原因，所以我们就必须在开始研究C#之前说一说.NET


## 公共语言运行时CLR

.NET的核心是其执行环境，也就是我们熟知的CLR或者.NET运行时，运行在此环境下的代码通常称为托管代码。

在CLR执行之前，任何的源代码还是需要编译成CLR可以理解的中间代码（IL），（我们并不是解释语言对不对？JavaScript才可以这样。不要和我提boo，我不想说）执行编译需要如下两个步骤：

1. 将源代码编译成IL。
2. CLR将IL代码编译成机器代码。

因为IL与Java的字节码思想十分相像（基于数字而不是文本的执行），所以编译成机器代码十分快。所以.NET拥有平台独立性、性能提升、语言互操作性等方面的能力


### 所谓的平台独立性
众所周知的事情就是目前这还是个笑话，.NET的很多特性是利用了Windows的特性，所以目前来看只能在Windows平台上使用，至于为什么有平台独立性，IL的设计思想和Java中间代码的设计思想非常相似，所以理论上.NET有很强的跨平台性，我们在ASP.NET 5上也看到了这个趋势，这不得不说是微软的一大进步，有兴趣的童鞋可以看看ASP.NET 5以及Host在Github上的.NET Core，目前来看问题多多，尤其是向下兼容方面真的是不咋地，我已经测试过了，但是开发方式开发风格我是真的喜欢，前段集成了Gulp和Bower，以及使用NodeJS编译前段代码的特性，跑题了，强烈感谢Mono在移动领域的贡献，出现了xamarin这种牛逼的东东，但是鄙视还要收费这种事情。微软微软快收购吧。

### 性能提升
这个仁者见仁智者见智，不想写，不能毒害任何兄弟。

### 语言互操作
其实这是IL中间代码的一个副作用，我想其实安德斯也没有在意吧，所有能够编译为IL的当然都能够互操作了，C# VB.NET VC.NET F#等等，只要你想就可以

###COM和COM+
本质上来说COM和COM+并不能编译成IL，但是并不妨碍.NET的调用，你可以使用.NET调用COM+和COM，这样你既可以拥有托管代码的优势，也可以拥有调用COM组件的能力。

###Windows 运行时

我现在翻译的时候，Windows Runtime已经走过了5个年头，Windows 10里面依旧使用Runtime的功能开发一些应用，例如自带的邮件、新闻客户端，Windows Runtime主要针对于Windows Store的应用程序，本地应用程序也可以调用一些，你可以使用C# C++ VB和Javascript来调用，不同语言的调用方式也不同。




