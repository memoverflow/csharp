#IL

提到IL，我们知道这是.NET Framework的核心，IL语言有如下特性：

1. 面向对象和接口
2. 值类型和引用类型的区分（装箱和拆箱）
3. 强数据类型
4. Exception错误处理
5. Attributes

##支持面向对象和接口
.NET面向对象的语言实现需要有一定的限制条件，IL需要实现特定的编程条件，架构在IL上面的语言也需要遵守这些
条件，微软选择了经典的面向对象的编程方式，兼容接口类型。

面向对象中IL引入的接口概念是在COM组件编程中为我们熟知的，但.NET内置的接口又与COM接口不太一样，.NET接口
不需要支持COM架构，不需要继承IUnkonwn接口，他们共享一个定义契约的语法原则，使用class继承并实现此原则，从而支持了C#中的多态等语法特性，.NET中继承自接口的类必须完全实现接口中定义的方法。

##值类型和引用类型

众所周知的，值类型在内存中的栈区，引用类型在内存中的堆区。

##强数据类型

IL架构在强数据类型基础上，所以每个变量在定义时必须定义出其类型，IL禁止产生模糊数据类型。VB6中数据类型支持自动转换，C++通过指针的方式进行数据转换，虽然定义强数据类型会有一定的性能上的损失，但其提供的便利之处远大于其性能损失（现在不都是提倡用空间换时间么）

* 语言互操作
* 垃圾回收
* 数据安全
* 应用程序域

### 强数据类型是语言互操作的关键

试想一下，如果我们用vb定义了一个方法，返回vb中的integer类型，现在我们用C#来调用这个方法，我们如何知道vb中这个方法返回值呢？我们又该如何使用呢？ IL中的强数据类型解决了这个问题。

*通用类型系统CTS*

通用类型系统CTS很简单，就是在IL中预定义强数据类型，所有编译为IL的语言都需要有类型的映射，所以vb中的integer映射为IL中的Int32，C#中的int类型映射为Int32。

CTS定义了类型的层次结构，这个层次结构如下：
![CTS 层次结构](1.png)

*通用语言规范CLS*

通用语言规范CLS和通用类型系统共同确保了语言的互操作性，CLS定义了一系列的标准，所有需要编译为IL的语言都需要遵守这些标准 然后举了个我没懂的区分大小写的例子...

1. 编译器不必要实现所有的CLS功能，只需要实现CLS的子集。
2. 实现CLS的编译器能够在.NET平台上编译通过并且被其他语言调用。

限制你的是使用public和protected定义的class和method，因为使用private定义的代码外部代码不能够调用到，所以你在private中可以充分利用语言特性为所欲为。